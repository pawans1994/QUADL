<?xml version="1.0" encoding="UTF-8"?>
<simulation id="Isotonic Equilibrium" version="1" date="3/1/06">
    <name>&lt;b&gt; &lt;/b&gt;</name>
<!--    <intro filename=""/>-->
    <debugger state="off"/> 
    <steps>
              <step id="create">

            <actions>
                <action event="record light"/> 
                 <action event="create" name="theexplainer" url="tools/text_explainer.swf"  x="2" y="30" xscale="1"  yscale="1"/>  
<!--               <action event="create" name="button" url="tools/button.swf"  x="25" y="400" xscale="1"  yscale="1"/>
    <action event="create" name="button2" url="tools/button.swf"  x="25" y="500" xscale="1"  yscale="1"/>-->
                <action event="create" name="bilayer" url="swfs/bilayer.jpg"  x="333" y="160" xscale="1.2"  yscale=".1"/>
                <action event="create" name="bilayer2" url="swfs/bilayermove.swf"  x="333" y="160" xscale="1"  yscale="1"/>
                <action event="create" name="ruler" url="tools/ruler.swf" x="330" y="5" xscale="1.2"  yscale="1.2"/> 
                <action event="create" name="box1" url="tools/ligandBoxKDNEW.swf"  x="333" y="0" xscale="1.0"  yscale="1.0"/> 
                <action event="create" name="con1_1" url="tools/DisplayValue.swf"  x="320" y="380" xscale="1"  yscale="1"/>
                <action event="create" name="con1_2" url="tools/DisplayValue.swf"  x="320" y="400" xscale="1"  yscale="1"/> 
                <action event="create" name="con0_1" url="tools/DisplayValue.swf"  x="450" y="380" xscale="1"  yscale="1"/> 
                <action event="create" name="con0_2" url="tools/DisplayValue.swf"  x="450" y="400" xscale="1"  yscale="1"/> 
                <action event="create" name="bar1" url="tools/formulaLine.swf"  x="445" y="375" xscale=".5"  yscale="2"/> 
                <action event="create" name="bar2" url="tools/formulaLine.swf"  x="575" y="375" xscale=".5"  yscale="2"/> 
                <action event="create" name="sign" url="tools/label.swf" x="520" y="390" xscale="1"  yscale="1"/> 
                
                <action event="create" name="con1_2a" url="tools/DisplayValue.swf"  x="320" y="450" xscale="1"  yscale="1"/>
                <action event="create" name="vol1" url="tools/DisplayValue.swf"  x="320" y="470" xscale="1"  yscale="1"/> 
                <action event="create" name="con0_2a" url="tools/DisplayValue.swf"  x="450" y="450" xscale="1"  yscale="1"/> 
                <action event="create" name="vol0" url="tools/DisplayValue.swf"  x="450" y="470" xscale="1"  yscale="1"/> 
                <action event="create" name="bar1a" url="tools/formulaLine.swf"  x="445" y="445" xscale=".5"  yscale="2"/> 
                <action event="create" name="bar2a" url="tools/formulaLine.swf"  x="575" y="445" xscale=".5"  yscale="2"/> 
                <action event="create" name="signa" url="tools/label.swf" x="520" y="460" xscale="1"  yscale="1"/> 
                
                <action event="create" name="userinput" url="tools/userinput_textbox.swf"  x="12" y="430" xscale="1"  yscale="1"/>  
                <action event="create" name="label1" url="tools/label.swf" x="450" y="360" xscale="1"  yscale="1"/> 
                <action event="create" name="label2" url="tools/label.swf" x="590" y="360" xscale="1"  yscale="1"/>

                <!--<action event="settimer" timer='12' advance='yes' />-->
            </actions>
             <objects>
                 <object name="theexplainer" state="visible">
                     <title>Isotonic Equilibrium</title>
                     <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;Equilibrium movement of ions with [+] and [-] equal on both sides.
                     </text>
                 </object>
                <object name="userinput" state="hilight"/>
            </objects>
                  <nextbutton text="Begin Simulation" />
            <prevbutton text="Back" state="0"/>
              </step>
      
        <step id="startmolecules">
            <objects>
                <object name="theexplainer" state="visible">
                    <title>Isotonic Equilibrium</title>
                    <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;Equilibrium movement of ions with [+] and [-] equal on both sides.
                    </text>
                </object>
                <object name="bilayer" state="visible"/>
                <object name="ruler" state="visible"/>
                <object name="box1" state="visible"/>
            </objects>
            <actions> 
                <action event="initialize" name="vol0" params="thevariable=vol0,thelabel=Volume,thevalue=0" /> 
                <action event="initialize" name="vol1" params="thevariable=vol1,thelabel=Volume,thevalue=0" /> 
                <action event="initialize" name="box1" params="leftBorder=0,rightBorder=410,topBorder=0,bottomBorder=330,leftBorder2=0,rightBorder2=410,topBorder2=165,bottomBorder2=330">
                    <molecules>
                        <molecule numMolecules= "0"  injectionforce= "0" velocity= "50"  cast= "moleculeNAplus"  eq1="500" eq2="200"  angle1= "0" angle2= "355" x="250" y="50" Xoffset="60" Yoffset="60"  watchEnvironment= "1" rotationVelocity="30"  watchEnvironment="1" rotation="0"  polarity = "0,0,0,0,0,0,0,0" mytype="molecule"  myID="1"  mybounce="true" />  
                        <molecule numMolecules= "0" myID="0"/>     <!--This is a fudge if only one molecule-->            
                        <molecule numMolecules= "0"  injectionforce= "0" velocity= "90"  cast= "moleculewater"  eq1="500" eq2="200"  angle1= "30" angle2= "315" x="250" y="50" Xoffset="60" Yoffset="60"  watchEnvironment= "1" rotationVelocity="30"  watchEnvironment="1" rotation="0"  brownian=".01" polarity = "0,0,0,0,.4,.4,.4,.4" mytype="molecule"  myID="2"  mybounce="true"/>
                   </molecules>
                </action>
                <action event="record all"/>
                <action event="initialize" name="con1_2" params="thevariable=con1_2,thelabel=[H2O],thevalue=0" /> 
                <action event="initialize" name="con0_2" params="thevariable=con0_2,thelabel=[H2O],thevalue=0" /> 
                <action event="initialize" name="con0_1" params="thevariable=con0_1,thelabel=[Na+],thevalue=0" /> 
                <action event="initialize" name="con1_1" params="thevariable=con1_1,thelabel=[Na+],thevalue=0" />
                <action event="initialize" name="con1_2a" params="thevariable=con1_2,thelabel=[H2O],thevalue=0" /> 
                <action event="initialize" name="con0_2a" params="thevariable=con0_2,thelabel=[H20],thevalue=0" />
                <action event="initialize" name="label1" params=" " data="Top"  /> 
                <action event="initialize" name="label2" params=" " data="Bottom" /> 
                <action event="initialize" name="sign" params=" " data= "~=" /> 
                <action event="initialize" name="signa" params=" " data="~=" /> 
           <!--     <action event="initialize" name="button" data="Add Na+"/>  -->
                <action event="settimer" timer='3' advance='yes' />
            </actions>
            <nextbutton text="Done" state="0"/>
            <prevbutton text="Back" state="0"/>
        </step>
        <step id="begin action">           
            <actions>
                <action event="record light"/> 
                <action event="sendmessage" name="box1" params="msg=changeParam,param1=M+,param2=4,param3=1,x=200,y=50,Xoffset=50,Yoffset=50" />
                <action event="sendmessage" name="box1" params="msg=changeParam,param1=M+,param2=30,param3=2,x=200,y=50,Xoffset=50,Yoffset=50" />
                <action event="sendmessage" name="box1" params="msg=changeParam,param1=M+,param2=4,param3=1,x=200,y=250,Xoffset=50,Yoffset=50" />
                <action event="sendmessage" name="box1" params="msg=changeParam,param1=M+,param2=30,param3=2,x=200,y=250,Xoffset=50,Yoffset=50" />

            </actions>
            <objects>
                <object name="theexplainer" state="visible">
                    <title>Isotonic Equilibrium</title>
                    <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;Equilibrium movement of ions with [+] and [-] charges equal on both sides.
&lt;br&gt;The Na+ ions are too large to move through the membrane. The water molecules can move freely across the membrane.
&lt;br&gt;                       
After observing the behavior of this system, click the button to add more Na+ to the upper region.
                    </text>
                </object>
                <object name="ruler" state="visible"/>
                <object name="bilayer" state="visible"/>
                <object name="box1" state="visible"/>
                <object name="con1_1" state="visible"/>
                <object name="con1_2" state="visible"/>
                <object name="con0_1" state="visible"/>
                <object name="con0_2" state="visible"/>
                <object name="bar1" state="visible"/>
                <object name="bar2" state="visible"/>
                <object name="sign" state="visible"/>
                <object name="con1_2a" state="visible"/>
                <object name="con0_2a" state="visible"/>
                <object name="vol0" state="visible"/>
                <object name="vol1" state="visible"/>
                <object name="bar1a" state="visible"/>
                <object name="bar2a" state="visible"/>
                <object name="signa" state="visible"/>
                <object name="label1" state="visible"/>
                <object name="label2" state="visible"/>
            </objects>
            <nextbutton text="Add Na+" state="visible"/>
            <prevbutton text="Back" state="0"/>
        </step>
        <step id="add Na ions">
            
            <actions>
                <action event="record light"/> 
                <action event="sendmessage" name="box1" params="msg=changeParam,param1=M+,param2=4,param3=1,x=250,y=50,Xoffset=50,Yoffset=50" />
                <action event="initialize" name="signa" params=" " data="≠" /> 
                <action event="create" name="box2" url="tools/ligandBoxKDNEW.swf"  x="333" y="0" xscale="1.0"  yscale="1.0"/> 
                <!--<action event="initialize" name="sign" params=">" />--> 
            </actions>
            <objects>
                <object name="theexplainer" state="visible">
                    <title>Isotonic Equilibrium</title>
                    <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;If we add more Na+ to the top and they are not able to cross the membrane, the system will move to equilibrium since the water molecules are free to cross the membrane such that the top +/- = bottom +/-.
&lt;br&gt;
The extra mass per volume in the upper region causes and increased pressure which pushes on the membrane.
&lt;br&gt;                      
Due to this increased pressure, which direction would this membrane move?
                    </text>
                </object>
                <object name="bilayer" state="visible"/>
                <object name="ruler" state="visible"/>
                <object name="box1" state="visible"/>
                <object name="con1_1" state="visible"/>
                <object name="con1_2" state="visible"/>
                <object name="con0_1" state="visible"/>
                <object name="con0_2" state="visible"/>
                <object name="bar1" state="visible"/>
                <object name="bar2" state="visible"/>
                <object name="sign" state="visible"/>
                <object name="con1_2a" state="visible"/>
                <object name="con0_2a" state="visible"/>
                <object name="vol0" state="visible"/>
                <object name="vol1" state="visible"/>
                <object name="bar1" state="visible"/>
                <object name="bar2" state="visible"/>
                <object name="button" state="visible"/>
                <object name="sign" state="visible"/>
                <object name="bar1a" state="visible"/>
                <object name="bar2a" state="visible"/>
                <object name="signa" state="visible"/>
                <object name="label1" state="visible"/>
                <object name="label2" state="visible"/>
                <object name="userinput" state="hilight"/>
                <object name="label1" state="visible"/>
                <object name="label2" state="visible"/>
            </objects>
            <nextbutton text="Equalize Pressure" state="visible"/>
            <prevbutton text="Back" state="0"/>
        </step>
        <step id="Equalize Pressure">
              <actions>
                <action event="record light"/> 
                  <action event="unload" name="box1" />
                  <action event="initialize" name="box2" params="leftBorder=0,rightBorder=410,topBorder=0,bottomBorder=330,leftBorder2=0,rightBorder2=410,topBorder2=220,bottomBorder2=330">
                      <molecules>
                          <molecule numMolecules= "0"  injectionforce= "0" velocity= "50"  cast= "moleculeNAplus"  eq1="500" eq2="200"  angle1= "0" angle2= "355" x="250" y="50" Xoffset="60" Yoffset="60"  watchEnvironment= "1" rotationVelocity="30"  rotation="0"  polarity = "0,0,0,0,0,0,0,0" mytype="molecule"  myID="1"  mybounce="true" />  
                          <molecule numMolecules= "0" myID="0"/>     <!--This is a fudge if only one molecule-->            
                          <molecule numMolecules= "0"  injectionforce= "0" velocity= "90"  cast= "moleculewater"  eq1="500" eq2="200"  angle1= "30" angle2= "315" x="250" y="50" Xoffset="60" Yoffset="60"  watchEnvironment= "1" rotationVelocity="30"  rotation="0"  brownian=".01" polarity = "0,0,0,0,.4,.4,.4,.4" mytype="molecule"  myID="2"  mybounce="true"/>
                      </molecules>
                  </action>

                      <action event="settimer" timer='9' advance='yes' resettimer='0' />    
            </actions>
            <objects>
                <object name="bilayer2" state="visible"/>
                <object name="ruler" state="visible"/> 
                <object name="box2" state="visible"/>  
            </objects>
            <nextbutton text="Done" />
            <prevbutton text="Back" state="0"/>
        </step>
        <step id="new box">
 
            <objects>
                <object name="theexplainer" state="visible">
                    <title>Isotonic Equilibrium</title>
                    <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;The system tries to equalize the pressure.
                    </text>
                </object>
                <object name="bilayer2" state="visible"/>
                <object name="ruler" state="visible"/>
                <object name="box2" state="visible"/>               
            </objects>
            <actions>
                <action event="record light"/> 

                <action event="initialize" name="bilayer2" />
                <action event="settimer" timer='20' advance='yes' />
                </actions>
            <nextbutton text="Done"  state="0"/>
            <prevbutton text="Back" state="0"/>
        </step>
        <step id="new box">           
            <objects>
                <object name="theexplainer" state="visible">
                    <title>Isotonic Equilibrium</title>
                    <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;The system tries to equalize the pressure.
                    </text>
                </object>
                <object name="bilayer2" state="visible"/>
                <object name="ruler" state="visible"/>
                <object name="box2" state="visible"/>  
                <object name="box1" state="visible"/>  
                <object name="con1_1" state="visible"/>
                <object name="con1_2" state="visible"/>
                <object name="con0_1" state="visible"/>
                <object name="con0_2" state="visible"/>
                <object name="bar1" state="visible"/>
                <object name="bar2" state="visible"/>
                <object name="sign" state="visible"/>
                <object name="con1_2a" state="visible"/>
                <object name="con0_2a" state="visible"/>
                <object name="vol0" state="visible"/>
                <object name="vol1" state="visible"/>
                <object name="bar1" state="visible"/>
                <object name="bar2" state="visible"/>
                <object name="sign" state="visible"/>
                <object name="bar1a" state="visible"/>
                <object name="bar2a" state="visible"/>
                <object name="signa" state="visible"/>
                <object name="label1" state="visible"/>
                <object name="label2" state="visible"/>
            </objects>
            <actions>
                <action event="record light"/> 
             <!--   Recreate the proper number of molecules and in the new volumes and tell user that now the water concentrations within the volumes are about equal-->
                <action event="sendmessage" name="box2" params="msg=changeParam,param1=M+,param2=8,param3=1,x=200,y=50,Xoffset=50,Yoffset=50" />
                <action event="sendmessage" name="box2" params="msg=changeParam,param1=M+,param2=30,param3=2,x=200,y=50,Xoffset=50,Yoffset=50" />
                <action event="sendmessage" name="box2" params="msg=changeParam,param1=M+,param2=4,param3=1,x=200,y=270,Xoffset=50,Yoffset=20" />
                <action event="sendmessage" name="box2" params="msg=changeParam,param1=M+,param2=30,param3=2,x=200,y=270,Xoffset=50,Yoffset=20" />   
                <action event="initialize" name="signa" params=" " data="~=" /> 
            </actions>
            <nextbutton text="Done"  state="0"/>
            <prevbutton text="Back" state="0"/>
        </step>
    </steps>
</simulation>
