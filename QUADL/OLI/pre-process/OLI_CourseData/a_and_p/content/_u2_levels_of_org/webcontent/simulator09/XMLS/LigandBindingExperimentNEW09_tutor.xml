<?xml version="1.0" encoding="UTF-8"?>
<simulation id="LigandBindingExperiment_tutor" version="2" simulatorVersion="08" date="02/12/06">
    <name>&lt;b&gt;Ligand Binding Experiment&lt;/b&gt;</name>
    <intro filename=""/>
    <debugger state="off"/> 
    <steps>
              <step id="create">

            <actions>
                <action event="record light"/>
                <action event="create" name="theexplainer" url="tools/text_explainer2.swf"  x="0" y="35" xscale="1"  yscale="1"/>
                <action event="create" name="slider1" url="tools/slider09.swf"  x="440" y="410" xscale="1"  yscale=".9"/>
                <action event="create" name="thegrapher" url="tools/graphVariableAvgOverTimeMsg09.swf" x="-3" y="350" xscale="1" yscale="1" /> 
                <action event="create" name="beaker" url="swfs/beaker.swf"  x="375" y="5" xscale="1.7"  yscale="1.5"/> 
                <action event="create" name="box1" url="tools/ligandBox09.swf"  x="383" y="31" xscale=".8"  yscale=".8"/>
                <action event="create" name="equation1" url="tools/equationML1.swf"  x="460" y="355" xscale="1" yscale="1" />
                <action event="create" name="pause" url="tools/pause.swf"  x="700" y="320" xscale="1" yscale="1" />
                <action event="create" name="castKey1" url="tools/castKey1.swf"  x="480" y="330" xscale=".65" yscale=".65" />            
                <action event="create" name="LINBag" url="tools/DisplayValue.swf"  x="480" y="460" xscale="1"  yscale="1"/> 
                <action event="settimer" timer='20' advance='yes' />
                <action event="create" name="userinput" url="tools/userinput_textbox.swf"  x="12" y="290" xscale="1"  yscale="1"/>   
            </actions>
                  <objects tutor="">
                 <object name="theexplainer" state="visible"/>
                 <title>Equilibrium</title>
                 <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;Equilibrium"
                 </text>
                <object name="userinput" state="hilight"/>
            </objects>
            <nextbutton text="next page" state="o"/>
            <prevbutton text="Back" state="0"/>
              </step>
        <step id="login">

            
            <actions>
                <action event="record light"/>
                <action event="initialize" name="opener" />
            </actions>
            <objects tutor="ligandbinding_1.xml">
                <object name="opener" state="visible"/>
                <object name="beaker" state="visible"/>
                <object name="theexplainer" state="invisible">
                    <title>Ligand Binding</title>
                    <text>&lt;br&gt;&lt;br&gt;&lt;br&gt;Please insert your lastname below and click the submit button. When you are ready to continue click "Begin Simulation."
                    </text>
                </object>
                <object name="userinput" state="hilight"/>
                <object name="slider1" state="invisible"/>
                <object name="equation1" state="visible" action="1" />
                <object name="equation2" state="visible" action="1" />
                <object name="castKey1" state="visible" />
                <object name="castKey2" state="visible" />
                <object name="inputs2" capture="yes" state="visible"/>
                <object name="pause" capture="yes" state="visible"/>
            </objects>
            <nextbutton text="Begin Simulation" state="1"/>
            <prevbutton text="Back" state="0"/>
        </step>
        <step id="explain">
            <objects tutor="">
                <object name="theexplainer" state="visible">
                    <title>Your goal is to obtain experimental values of fractional saturation at different free ligand concentrations.</title>
                    <text>You can change the free ligand concentration by moving the slider to the desired amount of free ligand.  Moving the slider re-initializes the display and adds the requested amount of ligand to the beaker.
                        
                        The output box "[L] in Bag @Equilibrium" gives the total amount of ligand in the dialysis bag when equilibrium is reached.
                        
                        The simulation and graph will give you a rough estimate of the amount of ligand bound. However, you should use the output box to obtain your experimental values.</text>
                </object>
                <!--<object name="userinput" state="visible"/>-->
                <object name="box1" state="visible"/>
                <object name="beaker" state="visible"/>
                <object name="thegrapher" state="visible"/> 
                <object name="pause" state="visible" />
                <object name="castKey1" state="visible" />
                <object name="castKey2" state="visible" />
                <object name="equation1" state="visible" action="1" />
                <object name="inputs2" state="visible" />
                <object name="castKey2" state="visible" />
                <object name="equation2" state="visible" action="1" />
                <object name="LFree" state="visible"/>
                <object name="LIn" state="visible"/>
                <object name="Toff" state="visible"/>
                <object name="L_free" state="visible"/>
                <object name="L" state="visible"/>
                <object name="LINBag" state="visible"/>
                <object name="ML" state="visible"/>
                <object name="thegrapher" state="visible" >
                    <child name="curve0" state="visible" color="#FF0000" label="S=7" />
                </object>
                <object name="slider1" state="visible"/>
            </objects>
            <actions>  
                <action event="sendmessage" name="userinput" params="checkvalue" />
                <action event="initialize" name="LINBag" params="thevariable=LINBag,thelabel=[L] in Bag @Equilibrium,thevalue=0" /> 
                <action event="initialize" name="slider1" params="label='[L] free',low=0,high=100,ligandID=3,simulator=box1,changeParam=M*,moleculeID=2" data="0"/> <!--This is what we need to wire a slider to a simulator-->
                <action event="record all"/>
            </actions>
            <nextbutton text="Continue" state="1"/>
            <prevbutton text="Back" state="0"/>
        </step>
        
        
        
        
        
       
        <step id="startmolecules">
            <objects tutor="">
                <object name="theexplainer" state="visible">
                    <title>Your goal is to obtain experimental values of fractional saturation at different free ligand concentrations.</title>
                    <text>You can change the free ligand concentration by moving the slider to the desired amount of free ligand.  Moving the slider re-initializes the display and adds the requested amount of ligand to the beaker.

The output box "[L] in Bag @Equilibrium" gives the total amount of ligand in the dialysis bag when equilibrium is reached.

The simulation and graph will give you a rough estimate of the amount of ligand bound. However, you should use the output box to obtain your experimental values.</text>
                </object>
              <!--  <object name="userinput" state="visible"/>-->
                <object name="box1" state="visible"/>
                <object name="beaker" state="visible"/>
                <object name="thegrapher" state="visible"/> 
                <object name="pause" state="visible" />
                <object name="castKey1" state="visible" />
                <object name="castKey2" state="visible" />
                <object name="equation1" state="visible" action="1" />
                <object name="inputs2" state="visible" />
                <object name="castKey2" state="visible" />
                <object name="equation2" state="visible" action="1" />
                <object name="LFree" state="visible"/>
                <object name="LIn" state="visible"/>
                <object name="Toff" state="visible"/>
                <object name="L_free" state="visible"/>
                <object name="L" state="visible"/>
                <object name="LINBag" state="visible"/>
                <object name="ML" state="visible"/>
                <object name="thegrapher" state="visible" >
                    <child name="curve0" state="visible" color="#FF0000" label="S=7" />
                </object>
                <object name="slider1" state="visible"/>
            </objects>
            <actions>  
                <action event="sendmessage" name="userinput" params="checkvalue" />
                <action event="initialize" name="LINBag" params="thevariable=LINBag,thelabel=[L] in Bag @Equilibrium,thevalue=0" /> 
                <action event="initialize" name="L" params="thevariable=M4,thelabel=product,thevalue=0" />   
                <action event="initialize" name="box1" params="leftBorder=0,rightBorder=400,topBorder=0,bottomBorder=330,leftBorder2=72,rightBorder2=328,topBorder2=0,bottomBorder2=245">
                    <molecules>
                        <molecule numMolecules= "0" myID="0"/>     <!--This is a fudge if only one molecule-->     
                        <molecule numMolecules= "0"  velocity= "40"  cast= "moleculeC1boundblue"   angle1= "45" angle2= "315" rotationVelocity="5"  rotation="30" x="200" y="100" Xoffset="5" Yoffset="5"  polarity = "0,0,0,0,0,0,0,0" mytype="molecule"  myID="1"  seperateinto="productidl?3,productidm?2,Kd?15,k?1000,Kcat?0,productidp?4" mybounce="true" />            <!-- bound molecule -->
                        <molecule numMolecules= "10"  velocity= "40"  cast= "moleculeC1"  eq1="500" eq2="200"  angle1= "45" angle2= "315" rotationVelocity="5"  rotation="30" x="200" y="100" Xoffset="5" Yoffset="5"  polarity = "0,0,0,0,0,0,0,0" mytype="molecule"  myID="2"   mybounce="true" />   <!-- molecule -->         
                        <molecule numMolecules= "0"  velocity= "75"  cast= "ligand1"  eq1="500" eq2="200"  angle1= "45" angle2= "315" rotationVelocity="5"  rotation="30"  x="200" y="100" Xoffset="175" Yoffset="100" polarity = ".5,.5,.5,.5,0,0,.5,.5" mytype="ligand"   myID="3"  mybounce="true" bindswith="molecule2.pocket1.bound,Kd?A-J:50|K-M:80|N-S:10|T-Z:130,k?500,productidm?1" />   <!-- ligand -->
                        <molecule numMolecules= "0"  velocity= "75"  cast= "product"  eq1="500" eq2="200"  angle1= "45" angle2= "315" rotationVelocity="5"  rotation="30"  mytype="ligand"  myID="4"  mybounce="true"  polarity = ".5,.5,.5,.5,0,0,.5,.5"  />   
                        <!--   don't add new bindswith parameters until we completely implement the parser for this-->
                    </molecules>
                </action>
                <action event="initialize" name="slider1" params="label='[L] free',low=0,high=100,ligandID=3,simulator=box1,changeParam=M**,moleculeID=2" data="0"/> <!--This is what we need to wire a slider to a simulator-->
                <action event="initialize" name="thegrapher" params="child=0,color=0x0000FF,myID=M1"  data="ymax=10,y_label=ML,graph_label="/>
                <action event="record all"/>
            </actions>
            <nextbutton text="Done" state="1"/>
            <prevbutton text="Back" state="0"/>
        </step>
        <step id="prepare to exit">
            
            <objects tutor="">
                
            </objects>
            <actions>
                <action event="unload" name="box1"/>
                <action event="settimer" timer='6' advance='yes' resettimer='0' />
            </actions>
            <nextbutton text="Next" state="0"/>
            <prevbutton text="Back" state="0"/>
        </step>
        
        <step id="exit">
            
            <objects tutor="">
                
            </objects>
            <actions>
                <action event="record light"/>
                <action event="exit" />
            </actions>
        </step>
        
    </steps>
</simulation>
